(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cf4e200"],{"9ece":function(e,t,a){"use strict";var n=a("9f26"),s=a.n(n);s.a},"9f26":function(e,t,a){},d770:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{dense:e.$q.screen.lt.md,title:"Laporan Keuangan",data:e.data,columns:e.columns,filter:e.filter,"row-key":"id",selection:"single",selected:e.selected},on:{"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-btn",{attrs:{color:"primary",icon:"fa fa-eye",disable:0===e.selected.length,size:"xs",label:"Lihat Laporan"},on:{click:function(t){e.lihatLaporan=!0}}}),a("q-btn",{attrs:{color:"primary",icon:"send",disable:0===e.selected.length||3===e.selected[0].status,size:"xs",label:"Kirim Pesan"},on:{click:function(t){e.pes=!0}}}),a("q-btn",{attrs:{color:"primary",icon:"edit",disable:0===e.selected.length||3===e.selected[0].status,size:"xs",label:"Change Status"},on:{click:e.changes}}),a("q-btn",{attrs:{color:"primary",icon:"fa fa-download",disable:0===e.selected.length,size:"xs",label:"Download Laporan"},on:{click:e.download}}),a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0}])}),a("q-dialog",{attrs:{"full-width":"","full-height":"",persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.lihatLaporan,callback:function(t){e.lihatLaporan=t},expression:"lihatLaporan"}},[a("isi-laporan",{attrs:{ss:e.selected}})],1),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.change,callback:function(t){e.change=t},expression:"change"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v(" Ubah Status Laporan")])]),a("q-separator"),a("q-card-section",[a("q-select",{attrs:{outlined:"",options:e.options,dense:!0,label:"Tahun","options-dense":!1},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1),a("q-card-section",[a("center",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",label:"Close"}}),e._v(" "),a("q-btn",{attrs:{color:"primary",label:"Ubah Status"},on:{click:e.ubahStatus}})],1)],1)],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.pes,callback:function(t){e.pes=t},expression:"pes"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Kirim Pesan Untuk Koperasi")])]),a("q-separator"),a("q-card-section",[a("div",{staticClass:"q-pa-md",staticStyle:{"max-width":"300px"}},[a("q-input",{attrs:{filled:"",label:"Pesan",type:"textarea"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),a("br"),a("center",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",label:"Tutup"}}),e._v(" "),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"Kirim Pesan"},on:{click:e.kirimPesan}})],1)],1)],1)],1)],1)},s=[],i=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("c1df")),o=a.n(i),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Isi Laporan")])]),a("q-separator"),a("q-card-section",e._l(e.nn,(function(t){return a("div",{key:t,staticClass:"desc"},[a("div",{domProps:{innerHTML:e._s(t)}})])})),0),a("q-card-section",[a("center",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",label:"Close"}})],1)],1)],1)],1)},l=[],c=a("1146"),d=a.n(c),p={props:["ss"],data:function(){return{nn:[]}},methods:{showLaporan:function(){var e=this;this.$q.loading.show(),this.$http.get("/api/getlaporanterkirim/".concat(this.ss[0].id),{headers:this.$auth.getHeader()}).then((function(t){var a=t.data,n=d.a.read(a.file,{type:"base64"});e.nn=[];for(var s=0;s<n.SheetNames.length;s++){var i=n.Sheets[n.SheetNames[s]];e.nn.push(d.a.utils.sheet_to_html(i,{}))}e.$q.loading.hide()})).catch((function(){e.$q.notify({type:"negative",message:"Terjadi kesalahan refresh (F5)"}),e.$q.loading.hide()}))}},created:function(){this.showLaporan()}},u=p,h=(a("9ece"),a("2877")),f=Object(h["a"])(u,r,l,!1,null,"74214a56",null),g=f.exports,m={components:{IsiLaporan:g},data:function(){var e=this;return{text:null,pes:!1,status:null,options:["Request","In Review","Approve"],change:!1,lihatLaporan:!1,selected:[],data:[],columns:[{name:"status",label:"status",align:"center",field:function(e){return 1===e.status?"Request":2===e.status?"In Riview":"Approve"},sortable:!0},{name:"koperasi",label:"Koperasi",align:"center",field:function(e){return e.nama_koperasi},sortable:!0},{name:"alamat",label:"Alamat Koperasi",align:"center",field:function(e){return e.alamat_koperasi},sortable:!0},{name:"file",label:"File (xls)",align:"center",field:function(e){return e.original_name},sortable:!0},{name:"laporan",label:"Laporan (Tahun)",align:"center",field:function(e){return e.tahun_laporan},sortable:!0},{name:"pengajuan",label:"Tanggal Pengajuan",align:"center",field:function(t){return e.getDate(t.created_at)},sortable:!0}],filter:""}},methods:{kirimPesan:function(){var e=this;this.$q.loading.show(),this.$http.post("/api/kirimpesanlaporan/".concat(this.selected[0].id),{text:this.text},{headers:this.$auth.getHeader()}).then((function(){e.$q.notify({type:"positive",message:"Berhasil mengirim pesan"}),e.$q.loading.hide()})).catch((function(){e.$q.notify({type:"negative",message:"Gagal mengirim pesan, refresh (F5)"}),e.$q.loading.hide()}))},ubahStatus:function(){var e=this;this.$q.loading.show(),this.$http.put("/api/changestatuslaporan/".concat(this.selected[0].id),{statusLaporan:this.status},{headers:this.$auth.getHeader()}).then((function(t){e.change=!1,e.$q.notify({type:"positive",message:"Berhasil mengubah Status"}),e.getData()})).catch((function(){e.$q.loading.hide()}))},changes:function(){this.status=1===this.selected[0].status?"Request":2===this.selected[0].status?"In Review":"Approve",this.change=!0},download:function(){var e=this;this.$q.loading.show(),this.$http.get("/api/downloadlaporankeuangan/".concat(this.selected[0].id),{headers:this.$auth.getHeader(),responseType:"arraybuffer"}).then((function(t){e.downloadFile(t.data,"laporankeuangan"),e.$q.loading.hide()})).catch((function(){e.$q.notify({type:"negative",message:"Terjadi kesalahan refresh (F5)"}),e.$q.loading.hide()}))},downloadFile:function(e,t){var a=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a);else{var n=window.URL.createObjectURL(a),s=document.createElement("a");s.href=n,s.download="".concat(t,".xlsx"),s.click(),setTimeout((function(){window.URL.revokeObjectURL(n)}),100),this.$swal({position:"center",type:"success",width:300,title:"Berhasil Mengexport Data",showConfirmButton:!1,timer:1500})}},getDate:function(e){return o.a.lang("id"),o()(e).format("dddd, Do MMMM YYYY")},getData:function(){var e=this;this.$http.get("/api/getlaporankoperasikabtoba",{headers:this.$auth.getHeader()}).then((function(t){var a=t.data;e.data=a.datatable,e.$q.loading.hide()})).catch((function(){e.$q.loading.hide()}))}},created:function(){this.$q.loading.show(),this.getData()}},b=m,v=Object(h["a"])(b,n,s,!1,null,"69877224",null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-4cf4e200.dc9b1d1b.js.map