(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75e1518a"],{"0283":function(e,t,a){},2851:function(e,t,a){"use strict";var n=a("0283"),i=a.n(n);i.a},"78aa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{dense:e.$q.screen.lt.md,title:"Laporan Terkirim Ke Dinas Koperasi",data:e.data,columns:e.columns,filter:e.filter,"row-key":"id",selection:"single",selected:e.selected},on:{"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("q-btn",{attrs:{color:"primary",icon:"fa fa-eye",disable:0===e.selected.length,size:"xs",label:"Lihat Laporan"},on:{click:function(t){e.lihatLaporan=!0}}})],1),a("div",{staticClass:"col"},[a("q-btn",{attrs:{color:"primary",icon:"edit",disable:0===e.selected.length,size:"xs",label:"Edit Laporan"},on:{click:function(t){e.editLaporan=!0}}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)])]},proxy:!0}])}),a("q-dialog",{attrs:{"full-width":"","full-height":"",persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.lihatLaporan,callback:function(t){e.lihatLaporan=t},expression:"lihatLaporan"}},[a("isi-laporan",{attrs:{ss:e.selected}})],1),a("q-dialog",{attrs:{"full-width":"","full-height":"",persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.editLaporan,callback:function(t){e.editLaporan=t},expression:"editLaporan"}},[a("edit-laporan",{attrs:{ss:e.selected},on:{getData:e.getData}})],1)],1)},i=[],s=a("c1df"),r=a.n(s),o=a("1146"),l=a.n(o),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Isi Laporan")])]),a("q-separator"),a("q-card-section",e._l(e.nn,(function(t){return a("div",{key:t,staticClass:"desc"},[a("div",{domProps:{innerHTML:e._s(t)}})])})),0),a("q-card-section",[a("center",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",label:"Close"}})],1)],1)],1)],1)},d=[],u={props:["ss"],data:function(){return{nn:[]}},methods:{showLaporan:function(){var e=this;this.$q.loading.show(),this.$http.get("/api/getlaporanterkirim/".concat(this.ss[0].id),{headers:this.$auth.getHeader()}).then((function(t){var a=t.data,n=l.a.read(a.file,{type:"base64"});e.nn=[];for(var i=0;i<n.SheetNames.length;i++){var s=n.Sheets[n.SheetNames[i]];e.nn.push(l.a.utils.sheet_to_html(s,{}))}e.$q.loading.hide()})).catch((function(){e.$q.notify({type:"negative",message:"Terjadi kesalahan refresh (F5)"}),e.$q.loading.hide()}))}},created:function(){this.showLaporan()}},h=u,p=(a("86f6"),a("2877")),f=Object(p["a"])(h,c,d,!1,null,"0376aa34",null),m=f.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Edit Pengiriman Laporan")])]),a("q-separator"),a("q-card-section",[a("q-file",{attrs:{filled:"","bottom-slots":"",type:"file",label:"Pilih File Excel",counter:""},on:{input:e.changeFile},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"cloud_upload"},on:{click:function(e){e.stopPropagation()}}})]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){t.stopPropagation(),e.model=null}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v(" File Excel ")]},proxy:!0}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}),a("br"),a("q-select",{attrs:{outlined:"",options:e.options,dense:!0,label:"Tahun","options-dense":!1},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:e.tahunKirim,callback:function(t){e.tahunKirim=t},expression:"tahunKirim"}}),a("br"),a("div",{staticClass:"row"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",label:"close"}}),a("q-btn",{attrs:{color:"primary","icon-right":"send",label:"Simpan"},on:{click:e.simpan}})],1)],1),a("q-separator"),a("q-card-section",e._l(e.nn,(function(t){return a("div",{key:t,staticClass:"desc"},[a("div",{domProps:{innerHTML:e._s(t)}})])})),0),a("q-separator"),a("q-card-section")],1)],1)},v=[],q=a("ae70"),b=q["a"],y=(a("2851"),Object(p["a"])(b,g,v,!1,null,"1e741a6a",null)),k=y.exports,$={components:{IsiLaporan:m,EditLaporan:k},data:function(){var e=this;return{lihatLaporan:!1,filter:"",editLaporan:!1,selected:[],data:[],columns:[{name:"status",label:"Status",align:"center",field:function(e){return 1===e.status?"Menunggu Approval":2===e.status?"Sedang di Review":"Laporan Diterima"},sortable:!0},{name:"tahun",label:"Laporan Tahun",align:"center",field:function(e){return e.tahun_laporan},sortable:!0},{name:"dikirim",label:"Tanggal Pengiriman",align:"center",field:function(t){return e.getDate(t.created_at)},sortable:!0},{name:"file",label:"File",align:"center",field:function(e){return e.original_name},sortable:!0}]}},methods:{getDate:function(e){return r.a.lang("id"),r()(e).format("dddd, Do MMMM YYYY")},getData:function(){var e=this;this.$http.get("/api/getlaporanterkirimkoperasi",{headers:this.$auth.getHeader()}).then((function(t){e.data=t.data.datatable,e.$q.loading.hide()})).catch((function(){e.$q.notify({type:"negative",message:"Terjadi kesalahan refresh (F5)"}),e.$q.loading.hide()}))}},created:function(){this.$q.loading.show(),this.getData()}},_=$,w=Object(p["a"])(_,n,i,!1,null,"7edfccf3",null);t["default"]=w.exports},"795a":function(e,t,a){},"86f6":function(e,t,a){"use strict";var n=a("795a"),i=a.n(n);i.a},ae70:function(e,t,a){"use strict";(function(e){a("d3b7"),a("25f0");var n=a("1146"),i=a.n(n);t["a"]={props:["ss"],data:function(){return{nn:[],tahunKirim:this.ss.tahun_laporan,model:null,options:[],excel:null}},methods:{simpan:function(){var e=this;this.$q.loading.show(),this.$http.put("/api/simpaneditlaporan/".concat(this.ss[0].id),this.useFormData(),{headers:this.$auth.getHeader()}).then((function(t){e.$q.notify({type:"positive",message:"Edit Laporan Berhasil Dilakukan"}),e.$emit("getData")})).catch((function(){e.$q.notify({type:"negative",message:"Terjadi kesalahan refresh (F5)"}),e.$q.loading.hide()}))},useFormData:function(){var e=new FormData;return this.excel&&e.append("files",this.excel),e.append("tahun",this.tahunKirim),e},changeFile:function(t){var a=this;if(this.excel=t,"application/vnd.ms-excel"!==t.type)return this.$q.notify({type:"negative",message:"File Harus dengan Format xls / xlsx"}),void(this.model=null);var n=new FileReader;n.readAsArrayBuffer(t),n.onload=function(t){var n=e.from(t.target.result).toString("base64"),s=i.a.read(n,{type:"base64"});a.nn=[];for(var r=0;r<s.SheetNames.length;r++){var o=s.Sheets[s.SheetNames[r]];a.nn.push(i.a.utils.sheet_to_html(o,{}))}}},showLaporan:function(){var e=this;this.$q.loading.show(),this.$http.get("/api/getlaporanterkirim/".concat(this.ss[0].id),{headers:this.$auth.getHeader()}).then((function(t){var a=t.data,n=i.a.read(a.file,{type:"base64"});e.nn=[];for(var s=0;s<n.SheetNames.length;s++){var r=n.Sheets[n.SheetNames[s]];e.nn.push(i.a.utils.sheet_to_html(r,{}))}e.$q.loading.hide()})).catch((function(){e.$q.notify({type:"negative",message:"Terjadi kesalahan refresh (F5)"}),e.$q.loading.hide()}))},getOptions:function(){var e=new Date,t=e.getFullYear()-10,a=t;this.options=[];while(a<t+20)this.options.push(a),a++;this.tahunKirim=this.ss[0].tahun_laporan}},created:function(){this.getOptions(),this.showLaporan()}}}).call(this,a("b639").Buffer)}}]);
//# sourceMappingURL=chunk-75e1518a.5026d7f5.js.map